- name: vlans of the config
  blockinfile:
    path: ./config/{{inventory_hostname}}.conf
    marker: ""
    block: |
        {% if vlans is defined %}
        vlans {
        {% for vlan_group in vlans %}
        {% for vlan_name in vlan_group['vlan_list'] %}
          {{ vlan_name }} {
             vlan-id {{ network_db[vlan_name]['vlan'] }};
        {% if vlan_group.layer in ['layer3'] %}
             l3-interface {{ vlanif_definition }}.{{ network_db[vlan_name]['vlan'] }};
        {% endif %}
           }
        {% endfor %}
        {% endfor %}
          }
        {% endif %}
