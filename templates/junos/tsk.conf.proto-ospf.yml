- name: fabric_interfaces
  blockinfile:
    path: ./config/{{inventory_hostname}}.conf
    marker: ""
    block: |
      ospf {
          area {{ ospf_area }} {

              interface lo0.0 {
                  passive;
              }
              {% if ports.fabric_ports is defined %}
              {% for port in ports.fabric_ports %}
              interface {{port}}.0 {
                  interface-type p2p;
              }
              {% endfor %}
              {% endif %}
          }
      }
